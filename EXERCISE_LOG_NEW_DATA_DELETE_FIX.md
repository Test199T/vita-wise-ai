# р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Ыр╕▒р╕Нр╕лр╕▓р╕Бр╕▓р╕гр╕ер╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣Ир╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕Зр╣Ар╕Юр╕┤р╣Ир╕б

## ЁЯЪи р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ъ

### р╕кр╕Цр╕▓р╕Щр╕Бр╕▓р╕гр╕Ур╣М:
- **р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Бр╣Ир╕▓**: р╕ер╕Ър╣Др╕Фр╣Й тЬЕ (р╣Ар╕Юр╕гр╕▓р╕░р╕бр╕╡ `backend_id` р╕Ир╕▓р╕Б Backend)
- **р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И**: р╕ер╕Ър╣Др╕бр╣Ир╣Др╕Фр╣Й тЭМ (р╣Ар╕Юр╕гр╕▓р╕░р╣Др╕бр╣Ир╕бр╕╡ `backend_id` р╕Хр╣Йр╕нр╕Зр╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕Бр╣Ир╕нр╕Щ)

### р╕кр╕▓р╣Ар╕лр╕Хр╕╕:
р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И Frontend р╕кр╕гр╣Йр╕▓р╕З `ExerciseSession` р╕Чр╕╡р╣Ир╣Др╕бр╣Ир╕бр╕╡ `backend_id` р╣Ар╕Юр╕гр╕▓р╕░р╕вр╕▒р╕Зр╣Др╕бр╣Ир╣Др╕Фр╣Йр╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б Backend

## тЬЕ р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Др╕Вр╕Чр╕╡р╣Ир╕Чр╕│р╣Бр╕ер╣Йр╕з

### 1. р╣Бр╕Бр╣Йр╣Др╕Вр╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Session р╣Гр╕лр╕бр╣И
```typescript
// р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕ер╕З localStorage р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╣Гр╕Щр╕лр╕Щр╣Йр╕▓
const newSession: ExerciseSession = {
  session_id: crypto.randomUUID(),
  session_date: formData.exercise_date,
  exercise_type: formData.exercise_type,
  duration_minutes: Number(formData.duration_minutes || 0),
  intensity_level: formData.intensity,
  calories_burned: Number(formData.calories_burned || 0),
  notes: formData.notes,
  // р╣Гр╕Кр╣Й ID р╕Ир╕▓р╕Б Backend response р╕Цр╣Йр╕▓р╕бр╕╡
  backend_id: savedExercise.id || undefined
};
```

### 2. р╣Ар╕Юр╕┤р╣Ир╕бр╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╣Гр╕Щ UI
```typescript
{/* р╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░р╕Бр╕▓р╕гр╕ер╕Ър╣Др╕Фр╣Й */}
{!session.backend_id && (
  <Badge variant="secondary" className="text-xs">
    тЪая╕П р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕Бр╣Ир╕нр╕Щр╕ер╕Ъ
  </Badge>
)}

{/* р╕Ыр╕╕р╣Ир╕бр╕ер╕Ър╕Ир╕░р╕Цр╕╣р╕Б disable р╕Цр╣Йр╕▓р╣Др╕бр╣Ир╕бр╕╡ backend_id */}
<Button 
  variant="destructive" 
  size="sm" 
  disabled={deletingId === session.session_id || !session.backend_id}
  title={!session.backend_id ? 'р╕Бр╕гр╕╕р╕Ур╕▓р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕Бр╣Ир╕нр╕Щр╕ер╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е' : 'р╕ер╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕е'}
>
  {deletingId === session.session_id ? 'р╕Бр╕│р╕ер╕▒р╕Зр╕ер╕Ъ...' : 'р╕ер╕Ъ'}
</Button>
```

### 3. р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕З Dialog р╕Бр╕▓р╕гр╕ер╕Ъ
```typescript
<AlertDialogDescription>
  {!session.backend_id 
    ? 'р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Щр╕╡р╣Йр╕вр╕▒р╕Зр╣Др╕бр╣Ир╕Юр╕гр╣Йр╕нр╕бр╕кр╕│р╕лр╕гр╕▒р╕Ър╕Бр╕▓р╕гр╕ер╕Ъ р╕Бр╕гр╕╕р╕Ур╕▓р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕лр╕Щр╣Йр╕▓р╣Ар╕Юр╕╖р╣Ир╕нр╣Вр╕лр╕ер╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Ир╕▓р╕Б Backend'
    : 'р╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕ер╕Ър╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Щр╕╡р╣Йр╕лр╕гр╕╖р╕нр╣Др╕бр╣И? р╕Бр╕▓р╕гр╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Щр╕╡р╣Йр╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕вр╕Бр╣Ар╕ер╕┤р╕Бр╣Др╕Фр╣Й'
  }
</AlertDialogDescription>

{/* р╣Бр╕кр╕Фр╕Зр╕Ыр╕╕р╣Ир╕бр╕ер╕Ър╣Ар╕Йр╕Юр╕▓р╕░р╣Ар╕бр╕╖р╣Ир╕нр╕бр╕╡ backend_id */}
{session.backend_id && (
  <AlertDialogAction onClick={() => deleteSession(session)}>
    р╕ер╕Ъ
  </AlertDialogAction>
)}
```

### 4. р╣Ар╕Юр╕┤р╣Ир╕б Debug Information
```typescript
// р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е ID р╕Чр╕╡р╣Ир╕кр╕│р╕Др╕▒р╕Н
sessions.forEach((session, index) => {
  console.log(`Session ${index + 1}:`, {
    session_id: session.session_id,
    backend_id: session.backend_id,
    exercise_type: session.exercise_type,
    exercise_date: session.session_date,
    can_delete: !!session.backend_id ? 'тЬЕ р╕ер╕Ър╣Др╕Фр╣Й' : 'тЭМ р╕ер╕Ър╣Др╕бр╣Ир╣Др╕Фр╣Й (р╣Др╕бр╣Ир╕бр╕╡ backend_id)'
  });
});

// р╣Бр╕кр╕Фр╕Зр╕кр╕гр╕╕р╕Ы
const deletableCount = sessions.filter(s => s.backend_id).length;
const nonDeletableCount = sessions.filter(s => !s.backend_id).length;
console.log('ЁЯУК р╕кр╕гр╕╕р╕Ы:', {
  total: sessions.length,
  deletable: deletableCount,
  non_deletable: nonDeletableCount
 });
```

## ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕лр╕ер╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕В

### 1. р╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣И
### 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Console:
   ```
   ЁЯЖХ р╕кр╕гр╣Йр╕▓р╕З session р╣Гр╕лр╕бр╣И: {
     session_id: "uuid-here",
     backend_id: 123,  // р╕Др╕зр╕гр╕бр╕╡р╕Др╣Ир╕▓
     savedExercise_id: 123
   }
   ```

### 3. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ UI:
   - р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕лр╕бр╣Ир╕Др╕зр╕гр╕бр╕╡ `backend_id` р╣Бр╕ер╕░р╕ер╕Ър╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡
   - р╣Др╕бр╣Ир╕Др╕зр╕гр╕бр╕╡ Badge "тЪая╕П р╕гр╕╡р╣Ар╕Яр╕гр╕Кр╕Бр╣Ир╕нр╕Щр╕ер╕Ъ"

### 4. р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б Debug:
   ```
   Session 1: {
     session_id: "uuid-here",
     backend_id: 123,
     exercise_type: "р╕зр╣Ир╕▓р╕вр╕Щр╣Йр╕│",
     exercise_date: "2025-09-03",
     can_delete: "тЬЕ р╕ер╕Ър╣Др╕Фр╣Й"
   }
   
   ЁЯУК р╕кр╕гр╕╕р╕Ы: {
     total: 1,
     deletable: 1,
     non_deletable: 0
   }
   ```

## ЁЯФН р╕Бр╕▓р╕гр╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

### 1. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Backend Response
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ `savedExercise.id` р╕бр╕╡р╕Др╣Ир╕▓р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ Backend р╕кр╣Ир╕З ID р╕Бр╕ер╕▒р╕Ър╕бр╕▓р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### 2. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Frontend State
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ `newSession.backend_id` р╕Цр╕╣р╕Бр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ localStorage р╣Ар╕Бр╣Зр╕Ъ `backend_id` р╕лр╕гр╕╖р╕нр╣Др╕бр╣И

## ЁЯЪи р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕бр╣Ир╣Др╕Фр╣Й

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Backend:
1. **CREATE endpoint**: р╕кр╣Ир╕З ID р╕Бр╕ер╕▒р╕Ър╕бр╕▓р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕лр╕гр╕╖р╕нр╣Др╕бр╣И
2. **Response format**: р╕бр╕╡ `id` field р╣Гр╕Щ response р╕лр╕гр╕╖р╕нр╣Др╕бр╣И

### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Frontend:
1. **Console**: р╕бр╕╡ error messages р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
2. **State**: `savedExercise.id` р╕бр╕╡р╕Др╣Ир╕▓р╕лр╕гр╕╖р╕нр╣Др╕бр╣И
3. **localStorage**: р╣Ар╕Бр╣Зр╕Ъ `backend_id` р╕лр╕гр╕╖р╕нр╣Др╕бр╣И

## ЁЯУЮ р╕Бр╕▓р╕гр╕Вр╕нр╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕нр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б

р╕лр╕▓р╕Бр╕вр╕▒р╕Зр╣Бр╕Бр╣Йр╣Др╕Вр╣Др╕бр╣Ир╣Др╕Фр╣Й р╕Бр╕гр╕╕р╕Ур╕▓р╣Бр╕Ир╣Йр╕З:
1. Console logs р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
2. Backend response р╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Бр╕кр╕гр╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е
3. Frontend state р╣Бр╕ер╕░ localStorage
4. Error messages р╕Чр╕╡р╣Ир╣Ар╕лр╣Зр╕Щ
